### <a name="_b7urdng99y53"></a>**Название задачи:** Открытие депозитов онлайн
### <a name="_hjk0fkfyohdk"></a>**Автор:** Никита Лапшин
### <a name="_uanumrh8zrui"></a>**Дата:** 11.12.2025
### <a name="_3bfxc9a45514"></a>**Функциональные требования**
Опишите здесь верхнеуровневые Use Cases. Их нужно оформить в виде таблицы с пошаговым описанием:

|**№**|**Действующие лица или системы**|**Use Case**|**Описание**|
|-----|--------------------------------|------------|------------|
| **UC-1** | Клиент (новый), Сайт, Сервис заявок, Кол-центр | Подача заявки на депозит с сайта | 1. Клиент открывает сайт.<br>2. Просматривает доступные депозиты и публичные ставки.<br>3. Заполняет форму заявки <br>4. Сайт отправляет заявку в Сервис заявок<br>5. Сервис заявок фиксирует запись и передает её в CRM кол центра<br>6. Менеджер кол-центра получает заявку и связывается с клиентом. |
| **UC-2** | Клиент (существующий), Интернет-банк, Сервис ставок, Сервис заявок, СМС шлюз | Подача заявки на депозит через интернет-банк | 1. Клиент проходит аутентификацию в интернет банке<br>2. Интернет банк запрашивает у сервиса ставок список продуктов и персональные ставки.<br>3. Клиент выбирает депозит и вводит сумму.<br>4. ИБ запрашивает у СМС шлюза код подтверждения.<br>5. Клиент вводит код.<br>6. ИБ передает заявку в Сервис заявок.<br>7. Сервис заявок регистрирует заявку и направляет её в очередь обработки.<br>8. Клиент видит статус «Принято в обработку». |
| **UC-3** | Сотрудник бэк-офиса, АБС, Сервис заявок, СМС-шлюз | Обработка заявки | 1. Сотрудник видит новые заявки в интерфейсе АБС или Сервиса заявок.<br>2. Проверяет данные и подтверждает открытие депозита.<br>3. АБС создаёт депозитный счёт.<br>4. Сервис заявок отправляет команду на СМС уведомление.<br>5. Клиент получает сообщение об успешном открытии |
| **UC-4** | Сотрудник бэк-офиса, Сервис ставок, Интернет-банк, Сайт | Управление депозитными ставками | 1. Сотрудник входит в административный интерфейс сервиса ставок.<br>2. Вводит базовые ставки и правила персонализации.<br>3. Сервис ставок сохраняет данные в базе.<br>4. ИБ и сайт запрашивают ставки |
### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**
Опишите здесь нефункциональные требования и архитектурно значимые требования.

|**№**|**Требование**|
|-----|--------------|
| **NFR-1** | Изоляция АБС: интернет-банк и сайт не должны интегрироваться с АБС напрямую. Все операции через сервисный слой |
| **NFR-2** | Производительность UI: операции клиента должны отвечать не более чем за 300–500 мс. |
| **NFR-3** | Доступность: ключевые сервисы — 99.9%, поддержка двух ЦОД. |
| **NFR-4** | Безопасность: обязательное TLS-шифрование всех каналов. Разграничение прав сотрудников. |
| **NFR-5** | Поддерживаемость: реализация СМС-подтверждений — без модификации ядра монолита интернет-банка |
| **NFR-6** | Масштабируемость: новые сервисы должны горизонтально масштабироваться. |
| **NFR-7** | Совместимость: технологический стек должен соответствовать экспертизе банка |
| **NFR-8** | Минимальная нагрузка на АБС: операции должны выполняться асинхронно |
### <a name="_qmphm5d6rvi3"></a>**Решение**
Приведите диаграммы контекста и контейнеров в модели C4. Опишите там основные компоненты и интеграции всех элементов решения. 

[container_diagram.puml](container_diagram.puml)
[context_diagram.puml](context_diagram.puml)

Также опишите, какой логикой вы руководствовались в ходе принятия решений и выбора технологий. Не забывайте, что необходимо учесть все функциональные и нефункциональные требования.
### **1) Разгрузка АБС**
АБС является узким местом и масштабируется только вертикально, поэтому:

- нельзя допускать прямых запросов от ИБ / сайта,
- вся активность проходит через Сервис заявок,
- критичная логика вынесена в новые сервисы.

### **2) Переход к модульной архитектуре**
Интернет-банк - монолит, который нельзя масштабировать эффективно.  
Новый функционал выносится в сервисы, чтобы:

- обеспечить горизонтальное масштабирование,
- ускорить развитие,
- снизить нагрузку на монолит.

### **3) Обход ограничений СМС-модуля**
Банк хочет избежать доработок ядра ИБ.  
Поэтому:
- Сервис заявок сам вызывает СМС-уведомления,
- ИБ только инициирует запрос.

### **4) Централизация ставок**
Excel-файлы заменяются сервисом ставок:

- повышается консистентность данных,
- появляется единый источник истины,
- система становится расширяемой.

### **5) Обеспечение высокой доступности**
99.9% достигается:

- балансировщиками,
- двумя ЦОДами,
- репликацией данных.
---

### <a name="_bjrr7veeh80c"></a>**Альтернативы**
Опишите здесь наиболее важные альтернативные решения.

**Недостатки, ограничения, риски**

Подробно опишите здесь недостатки, ограничения и риски выбранного решения.

### **Альтернатива 1: Прямая интеграция интернет-банка с АБС**
**Недостатки:**
- резкий рост нагрузки на АБС,
- невозможность горизонтального масштабирования,
- высокий риск инцидентов,
- нарушение NFR-1.

### **Альтернатива 2: Реализация функционала внутри АБС**
**Недостатки:**
- замедленные релизы,
- сильная нагрузка на АБС,
- отсутствие гибкости,
- нарушение NFR-2.

**Недостатки, ограничения, риски**

Подробно опишите здесь недостатки, ограничения и риски выбранного решения.

Сложность: Внедрение микросервисной архитектуры и Kafka увеличивает операционную сложность. Требует новых компетенций у команды.

Стоимость: Необходимы ресурсы на развертывание и поддержку новых компонентов.

Ограничение: Требуется доработка монолита интернет-банка для интеграции с новыми сервисами через API, что может быть нетривиально.
