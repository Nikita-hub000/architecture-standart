### <a name="_b7urdng99y53"></a>**Название задачи:** Передача ставок в кол-центр
### <a name="_hjk0fkfyohdk"></a>**Автор:** Никита Лапшин
### <a name="_uanumrh8zrui"></a>**Дата:** 11.12.2025
### <a name="_3bfxc9a45514"></a>**Функциональные требования**
Опишите здесь верхнеуровневые Use Cases. Их нужно оформить в виде таблицы с пошаговым описанием:

|**№**|**Действующие лица или системы**|**Use Case**|**Описание**|
|-----|--------------------------------|------------|------------|
| UC-5 | Оператор кол-центра банка, Система кол-центра, Сервис ставок | Консультация клиента по актуальным ставкам | 1. Клиент звонит в кол центр банка<br>2. Оператор открывает интерфейс<br>3. Система колцентра делает запрос в сервис ставок<br>4. Отображаются текущие ставки.<br>5. Оператор консультирует клиента |
| UC-6 | Сервис ставок, Партнёрский кол-центр | Передача файла со ставками | 1. Сотрудник обновляет ставки<br>2. Сервис ставок формирует файл<br>3. Файл автоматически выгружается на SFTP партнёра.<br>4. Партнёрская система забирает файл и обновляет справочники |
### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**
Опишите здесь нефункциональные требования и архитектурно значимые требования.

|**№**|**Требование**|
|-----|--------------|
| NFR-7 | Доступность сервиса ставок — 99.5% при работе с кол-центром. |
| NFR-8 | Безопасность: выгрузка файла для партнёра должна происходить через защищённый SFTP-канал. |
| NFR-9 | Формат файла должен быть стабильным, согласованным и версионируемым. |
| NFR-10 | Актуализация ставок для банка — не более 30 секунд от изменения ставки в системе. |
### <a name="_qmphm5d6rvi3"></a>**Решение**
Приведите диаграммы контекста и контейнеров в модели C4. Опишите там основные компоненты и интеграции всех элементов решения. 
[container_diagram.puml](container_diagram.puml)
[context_diagram.puml](context_diagram.puml)

Также опишите, какой логикой вы руководствовались в ходе принятия решений и выбора технологий. Не забывайте, что необходимо учесть все функциональные и нефункциональные требования.

### **1) Прямая интеграция кол-центра банка с сервисом ставок**  
- Кол-центр работает внутри инфраструктуры банка.  
- Поддерживает REST API.  
- Требования к актуальности (<30 сек) соблюдаются.

### **2) Обмен файлами с партнёрским кол-центром через SFTP**  
- Ограничения внешней стороны.  
- У них есть только механизм получения файлов.  
- Сервис ставок формирует файл при изменении данных (или по расписанию).

### **3) Единый источник истины**  
Все системы — сайт, ИБ, кол-центры — получают данные о ставках только из сервиса ставок.

### <a name="_bjrr7veeh80c"></a>**Альтернативы**
Опишите здесь наиболее важные альтернативные решения.

### **Альтернатива 1: REST API и для партнёра**
**Недостатки:**
- партнёр не поддерживает API-вызовы,
- требуется модификация их систем - невозможно

### **Альтернатива 2: Репликация БД ставок**
**Недостатки:**
- нарушает границы контекстов,
- риски безопасности,
- избыточно сложно,

**Недостатки, ограничения, риски**

Подробно опишите здесь недостатки, ограничения и риски выбранного решения.

Задержка обновления данных у партнёра - Ставки поступают только после выгрузки файла.
Нет обратной связи - SFTP не гарантирует, что партнёр обработал файл.
Мониторинг - Требуется отдельный мониторинг успешных выгрузок.
Безопасность - Необходима ротация SSH-ключей и контроль записи на SFTP.


